/* ============================================
   VIBE – Premium Music Streaming Platform
   Design System & Styles
   ============================================ */

/* ─── Variables ─── */
:root {
  /* Colors */
  --bg-base:     #0a0a12;
  --bg-surface:  #111120;
  --bg-elevated: #1a1a2e;
  --bg-card:     #16162a;
  --bg-hover:    #1e1e38;
  --bg-active:   #252545;

  --purple-500:  #8b5cf6;
  --purple-600:  #7c3aed;
  --purple-400:  #a78bfa;
  --pink-500:    #ec4899;
  --pink-400:    #f472b6;
  --blue-500:    #3b82f6;
  --green-500:   #10b981;

  --gradient-primary:   linear-gradient(135deg, #8b5cf6, #ec4899);
  --gradient-secondary: linear-gradient(135deg, #6366f1, #8b5cf6);
  --gradient-bg:        linear-gradient(135deg, #1a0533, #0a0a12, #0d1b3b);

  --text-primary:   #ffffff;
  --text-secondary: #a1a1b5;
  --text-muted:     #606080;
  --text-disabled:  #404060;

  --border-subtle:  rgba(255,255,255,0.06);
  --border-medium:  rgba(255,255,255,0.12);
  --border-active:  rgba(139,92,246,0.5);

  /* Sizes */
  --sidebar-w:     240px;
  --player-h:      80px;
  --topbar-h:      64px;
  --panel-w:       300px;
  --radius-sm:     8px;
  --radius-md:     12px;
  --radius-lg:     16px;
  --radius-xl:     24px;
  --radius-full:   9999px;

  /* Transitions */
  --ease-smooth:   cubic-bezier(0.4, 0, 0.2, 1);
  --ease-bounce:   cubic-bezier(0.34, 1.56, 0.64, 1);
  --trans-fast:    0.15s var(--ease-smooth);
  --trans-med:     0.25s var(--ease-smooth);
  --trans-slow:    0.35s var(--ease-smooth);

  /* Shadows */
  --shadow-sm:  0 2px 8px rgba(0,0,0,0.4);
  --shadow-md:  0 8px 24px rgba(0,0,0,0.5);
  --shadow-lg:  0 16px 48px rgba(0,0,0,0.6);
  --shadow-glow: 0 0 30px rgba(139,92,246,0.3);
}

/* ─── Reset ─── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { height: 100%; scroll-behavior: smooth; }
body {
  font-family: 'Inter', system-ui, -apple-system, sans-serif;
  background: var(--bg-base);
  color: var(--text-primary);
  height: 100%;
  overflow: hidden;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
a { color: inherit; text-decoration: none; cursor: pointer; }
button { font-family: inherit; border: none; background: none; cursor: pointer; color: inherit; }
input, textarea, select { font-family: inherit; }
ul, ol { list-style: none; }
img { display: block; max-width: 100%; }

/* ─── Utilities ─── */
.hidden { display: none !important; }
.flex { display: flex; }
.items-center { align-items: center; }
.gap-2 { gap: 8px; }
.truncate { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.sr-only { position: absolute; width: 1px; height: 1px; overflow: hidden; clip: rect(0,0,0,0); }

/* ─── Scrollbar ─── */
::-webkit-scrollbar { width: 6px; height: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--bg-hover); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: var(--bg-active); }

/* ══════════════════════════════════════════════
   AUTH SCREEN
══════════════════════════════════════════════ */
.auth-screen {
  position: fixed; inset: 0;
  display: flex; align-items: center; justify-content: center;
  z-index: 1000;
  overflow: hidden;
}

.auth-bg {
  position: absolute; inset: 0;
  background: radial-gradient(ellipse at 30% 20%, rgba(139,92,246,0.25) 0%, transparent 50%),
              radial-gradient(ellipse at 70% 80%, rgba(236,72,153,0.2) 0%, transparent 50%),
              radial-gradient(ellipse at 50% 50%, rgba(99,102,241,0.15) 0%, transparent 60%),
              linear-gradient(135deg, #0a0020, #0a0a12, #020218);
}

.auth-orb {
  position: absolute;
  border-radius: 50%;
  filter: blur(80px);
  opacity: 0.6;
  animation: float 8s ease-in-out infinite;
}
.auth-orb-1 { width: 500px; height: 500px; background: radial-gradient(circle, #7c3aed55, transparent); top: -200px; left: -100px; animation-delay: 0s; }
.auth-orb-2 { width: 400px; height: 400px; background: radial-gradient(circle, #ec489933, transparent); bottom: -150px; right: -50px; animation-delay: 3s; }
.auth-orb-3 { width: 300px; height: 300px; background: radial-gradient(circle, #3b82f622, transparent); top: 40%; left: 40%; animation-delay: 6s; }

@keyframes float {
  0%, 100% { transform: translate(0, 0) scale(1); }
  33% { transform: translate(30px, -30px) scale(1.05); }
  66% { transform: translate(-20px, 20px) scale(0.95); }
}

.auth-container {
  position: relative; z-index: 1;
  display: flex; flex-direction: column; align-items: center;
  gap: 32px; width: 100%; max-width: 420px; padding: 24px;
}

.auth-brand {
  display: flex; align-items: center; gap: 12px;
}
.auth-brand-name {
  font-family: 'Poppins', sans-serif;
  font-size: 32px; font-weight: 900;
  letter-spacing: 4px;
  background: var(--gradient-primary);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
}

.auth-card {
  width: 100%;
  background: rgba(26, 26, 46, 0.8);
  backdrop-filter: blur(24px);
  border: 1px solid var(--border-medium);
  border-radius: var(--radius-xl);
  padding: 40px;
  box-shadow: var(--shadow-lg), inset 0 1px 0 rgba(255,255,255,0.08);
}

.auth-form { display: none; }
.auth-form.active { display: block; animation: slideUp 0.4s var(--ease-smooth); }

@keyframes slideUp {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

.auth-title {
  font-size: 28px; font-weight: 800;
  margin-bottom: 6px;
}
.auth-subtitle {
  color: var(--text-secondary);
  font-size: 14px; margin-bottom: 32px;
}

.form-group {
  margin-bottom: 20px;
}
.form-group label {
  display: block;
  font-size: 13px; font-weight: 600;
  color: var(--text-secondary);
  margin-bottom: 8px; text-transform: uppercase; letter-spacing: 0.5px;
}
.form-group input,
.form-group textarea,
.form-group select {
  width: 100%;
  background: rgba(255,255,255,0.06);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-sm);
  padding: 12px 16px;
  color: var(--text-primary);
  font-size: 15px;
  transition: var(--trans-fast);
  outline: none;
}
.form-group input:focus,
.form-group textarea:focus {
  border-color: var(--purple-500);
  background: rgba(139,92,246,0.08);
  box-shadow: 0 0 0 3px rgba(139,92,246,0.15);
}
.form-group input::placeholder,
.form-group textarea::placeholder { color: var(--text-muted); }
.form-group textarea { resize: vertical; min-height: 80px; }

.input-password { position: relative; }
.input-password input { padding-right: 48px; }
.toggle-password {
  position: absolute; right: 14px; top: 50%; transform: translateY(-50%);
  color: var(--text-muted); padding: 4px; border-radius: 4px;
  transition: color var(--trans-fast);
}
.toggle-password:hover { color: var(--text-primary); }

.password-strength { margin-top: -12px; margin-bottom: 20px; }
.strength-bar {
  height: 3px; background: var(--bg-hover);
  border-radius: 2px; margin-bottom: 6px;
  overflow: hidden;
}
.strength-fill {
  height: 100%; width: 0%;
  border-radius: 2px;
  transition: width 0.3s, background 0.3s;
}
#strength-label { font-size: 12px; color: var(--text-muted); }

.form-options {
  display: flex; align-items: center; justify-content: space-between;
  margin-bottom: 20px;
}
.checkbox-label {
  display: flex; align-items: center; gap: 8px;
  font-size: 14px; color: var(--text-secondary);
  cursor: pointer;
}
.checkbox-label input[type="checkbox"] { accent-color: var(--purple-500); }
.forgot-link { font-size: 14px; color: var(--purple-400); }
.forgot-link:hover { text-decoration: underline; }

.btn-auth {
  width: 100%; padding: 14px;
  background: var(--gradient-primary);
  color: white; font-size: 15px; font-weight: 700;
  border-radius: var(--radius-sm);
  transition: var(--trans-fast);
  letter-spacing: 0.3px;
  position: relative; overflow: hidden;
}
.btn-auth::after {
  content: ''; position: absolute; inset: 0;
  background: rgba(255,255,255,0);
  transition: background var(--trans-fast);
}
.btn-auth:hover::after { background: rgba(255,255,255,0.08); }
.btn-auth:active { transform: scale(0.99); }

.btn-demo {
  background: rgba(255,255,255,0.06) !important;
  border: 1px solid var(--border-medium);
  margin-top: 12px;
  display: flex; align-items: center; justify-content: center; gap: 10px;
}
.btn-demo:hover { background: rgba(255,255,255,0.1) !important; }
/* Keep for backward compat */
.btn-google {
  background: rgba(255,255,255,0.06) !important;
  border: 1px solid var(--border-medium);
  margin-top: 12px;
  display: flex; align-items: center; justify-content: center; gap: 10px;
}
.btn-google:hover { background: rgba(255,255,255,0.1) !important; }

.auth-divider {
  display: flex; align-items: center; gap: 16px;
  margin: 20px 0 0;
  color: var(--text-muted); font-size: 13px;
}
.auth-divider::before, .auth-divider::after {
  content: ''; flex: 1; height: 1px; background: var(--border-subtle);
}

.auth-switch {
  text-align: center; margin-top: 20px;
  font-size: 14px; color: var(--text-secondary);
}
.auth-switch a { color: var(--purple-400); font-weight: 600; }
.auth-switch a:hover { text-decoration: underline; }

.auth-terms {
  font-size: 12px; color: var(--text-muted);
  text-align: center; margin-top: 16px; line-height: 1.6;
}
.auth-terms a { color: var(--purple-400); }

.auth-features {
  display: flex; gap: 24px; flex-wrap: wrap; justify-content: center;
}
.feature-item {
  display: flex; align-items: center; gap: 8px;
  font-size: 13px; color: var(--text-secondary);
  background: rgba(255,255,255,0.04);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-full);
  padding: 8px 16px;
}
.feature-icon { font-size: 16px; }

/* ══════════════════════════════════════════════
   APP LAYOUT
══════════════════════════════════════════════ */
.app {
  display: grid;
  grid-template-columns: var(--sidebar-w) 1fr;
  grid-template-rows: 1fr var(--player-h);
  height: 100vh;
  width: 100vw;
  overflow: hidden;
}

/* ─── SIDEBAR ─── */
.sidebar {
  grid-row: 1 / 2; grid-column: 1 / 2;
  background: var(--bg-surface);
  border-right: 1px solid var(--border-subtle);
  display: flex; flex-direction: column;
  height: calc(100vh - var(--player-h));
  overflow: hidden;
  z-index: 100;
  transition: transform var(--trans-med);
}

.sidebar-top { padding: 20px 12px 12px; flex-shrink: 0; }

.sidebar-brand {
  display: flex; align-items: center; gap: 10px;
  padding: 4px 12px 20px;
  cursor: pointer;
}
.sidebar-brand span {
  font-family: 'Poppins', sans-serif;
  font-size: 20px; font-weight: 900;
  letter-spacing: 3px;
  background: var(--gradient-primary);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
}

.sidebar-nav { display: flex; flex-direction: column; gap: 2px; }
.nav-item {
  display: flex; align-items: center; gap: 14px;
  padding: 10px 14px;
  border-radius: var(--radius-sm);
  font-size: 14px; font-weight: 500;
  color: var(--text-secondary);
  cursor: pointer; transition: var(--trans-fast);
  position: relative;
}
.nav-item:hover { background: var(--bg-hover); color: var(--text-primary); }
.nav-item.active {
  background: rgba(139,92,246,0.12);
  color: var(--text-primary);
}
.nav-item.active::before {
  content: '';
  position: absolute; left: 0; top: 25%; bottom: 25%;
  width: 3px; border-radius: 0 2px 2px 0;
  background: var(--gradient-primary);
}
.nav-item svg { flex-shrink: 0; }

.sidebar-section {
  padding: 8px 12px;
  flex: 1; overflow: hidden;
  display: flex; flex-direction: column;
}
.sidebar-section-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 8px 14px 12px;
  font-size: 11px; font-weight: 700;
  color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px;
}

.btn-icon-sm {
  width: 28px; height: 28px;
  display: flex; align-items: center; justify-content: center;
  border-radius: 6px;
  color: var(--text-muted);
  transition: var(--trans-fast);
}
.btn-icon-sm:hover { background: var(--bg-hover); color: var(--text-primary); }

.playlist-list {
  flex: 1; overflow-y: auto; padding: 0 4px;
  display: flex; flex-direction: column; gap: 1px;
}
.playlist-item-sidebar {
  display: flex; align-items: center; gap: 10px;
  padding: 8px 10px; border-radius: var(--radius-sm);
  cursor: pointer; transition: var(--trans-fast);
  color: var(--text-secondary); font-size: 14px;
}
.playlist-item-sidebar:hover { background: var(--bg-hover); color: var(--text-primary); }
.playlist-item-sidebar.active { background: var(--bg-active); color: var(--text-primary); }
.playlist-item-sidebar .pl-icon {
  width: 36px; height: 36px; flex-shrink: 0;
  border-radius: 6px; overflow: hidden;
  display: flex; align-items: center; justify-content: center;
}
.playlist-item-sidebar .pl-icon img { width: 100%; height: 100%; object-fit: cover; }
.pl-icon-gradient {
  background: var(--gradient-primary);
}
.playlist-item-sidebar .pl-name { flex: 1; min-width: 0; }
.playlist-item-sidebar .pl-name-text { font-weight: 500; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.playlist-item-sidebar .pl-name-meta { font-size: 12px; color: var(--text-muted); }

.sidebar-bottom {
  padding: 12px; border-top: 1px solid var(--border-subtle);
  flex-shrink: 0; position: relative;
}
.user-menu {
  display: flex; align-items: center; gap: 10px;
  padding: 8px 10px; border-radius: var(--radius-sm);
  cursor: pointer; transition: var(--trans-fast);
}
.user-menu:hover { background: var(--bg-hover); }
.user-avatar {
  width: 34px; height: 34px; border-radius: 50%; flex-shrink: 0;
  background: var(--gradient-primary);
  display: flex; align-items: center; justify-content: center;
  font-weight: 700; font-size: 14px;
  text-transform: uppercase;
}
.user-avatar img { width: 100%; height: 100%; object-fit: cover; border-radius: 50%; }
.user-info { flex: 1; min-width: 0; }
.user-name { display: block; font-size: 13px; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.user-plan { font-size: 11px; color: var(--purple-400); font-weight: 500; }

.user-dropdown {
  position: absolute; bottom: calc(100% + 8px); left: 12px; right: 12px;
  background: var(--bg-elevated);
  border: 1px solid var(--border-medium);
  border-radius: var(--radius-md);
  padding: 8px;
  box-shadow: var(--shadow-lg);
  z-index: 200; animation: slideUp 0.2s var(--ease-smooth);
}
.user-dropdown a {
  display: flex; align-items: center; gap: 10px;
  padding: 10px 12px; border-radius: var(--radius-sm);
  font-size: 14px; color: var(--text-secondary);
  transition: var(--trans-fast); cursor: pointer;
}
.user-dropdown a:hover { background: var(--bg-hover); color: var(--text-primary); }
.logout-item { color: #f87171 !important; }
.logout-item:hover { background: rgba(248,113,113,0.1) !important; }
.dropdown-divider { height: 1px; background: var(--border-subtle); margin: 6px 4px; }

/* ─── CONTENT WRAPPER ─── */
.content-wrapper {
  grid-column: 2 / 3; grid-row: 1 / 2;
  display: flex; flex-direction: column;
  overflow: hidden;
  min-width: 0;
}

/* ─── TOPBAR ─── */
.topbar {
  height: var(--topbar-h); flex-shrink: 0;
  background: rgba(10,10,18,0.8);
  backdrop-filter: blur(20px);
  border-bottom: 1px solid var(--border-subtle);
  display: flex; align-items: center; justify-content: space-between;
  padding: 0 24px; gap: 16px;
  position: sticky; top: 0; z-index: 50;
}

.topbar-left { display: flex; align-items: center; gap: 12px; flex: 1; }
.topbar-right { display: flex; align-items: center; gap: 8px; flex-shrink: 0; }

.btn-icon {
  width: 36px; height: 36px;
  display: flex; align-items: center; justify-content: center;
  border-radius: 50%;
  color: var(--text-secondary);
  transition: var(--trans-fast);
}
.btn-icon:hover { background: var(--bg-hover); color: var(--text-primary); }
.btn-icon.active { color: var(--purple-400); }

.nav-back, .nav-fwd { flex-shrink: 0; }

.topbar-search-wrap { flex: 1; max-width: 480px; }
.topbar-search {
  display: flex; align-items: center; gap: 10px;
  background: rgba(255,255,255,0.08);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-full);
  padding: 8px 16px;
  transition: var(--trans-fast);
}
.topbar-search:focus-within {
  background: rgba(255,255,255,0.1);
  border-color: var(--purple-500);
  box-shadow: 0 0 0 3px rgba(139,92,246,0.15);
}
.topbar-search svg { color: var(--text-muted); flex-shrink: 0; }
.topbar-search input {
  flex: 1; background: none; border: none;
  color: var(--text-primary); font-size: 14px; outline: none;
}
.topbar-search input::placeholder { color: var(--text-muted); }
.search-clear {
  color: var(--text-muted); border-radius: 50%;
  width: 20px; height: 20px;
  display: flex; align-items: center; justify-content: center;
  transition: color var(--trans-fast);
}
.search-clear:hover { color: var(--text-primary); }

.notif-btn {
  position: relative;
  width: 36px; height: 36px;
  display: flex; align-items: center; justify-content: center;
  border-radius: 50%;
  color: var(--text-secondary);
  cursor: pointer; transition: var(--trans-fast);
}
.notif-btn:hover { background: var(--bg-hover); color: var(--text-primary); }
.notif-dot {
  position: absolute; top: 6px; right: 6px;
  width: 8px; height: 8px; border-radius: 50%;
  background: var(--purple-500);
  border: 2px solid var(--bg-base);
}

/* ─── PAGE CONTENT ─── */
.page-content {
  flex: 1; overflow-y: auto;
  padding: 32px;
  min-height: 0;
}
.page-content:focus { outline: none; }

/* ══════════════════════════════════════════════
   SIDE PANELS (Queue & Lyrics)
══════════════════════════════════════════════ */
.side-panel {
  position: fixed; right: -320px; top: 0;
  width: var(--panel-w); height: calc(100vh - var(--player-h));
  background: var(--bg-surface);
  border-left: 1px solid var(--border-subtle);
  display: flex; flex-direction: column;
  z-index: 200;
  transition: right var(--trans-med);
}
.side-panel.open { right: 0; }

.panel-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 20px; border-bottom: 1px solid var(--border-subtle);
  flex-shrink: 0;
}
.panel-header h3 { font-size: 16px; font-weight: 700; }
.panel-body { flex: 1; overflow-y: auto; padding: 12px; }

/* Queue Items */
.queue-item {
  display: flex; align-items: center; gap: 10px;
  padding: 8px 10px; border-radius: var(--radius-sm);
  cursor: pointer; transition: var(--trans-fast);
}
.queue-item:hover { background: var(--bg-hover); }
.queue-item.current { background: rgba(139,92,246,0.15); }
.queue-item .qi-num {
  width: 20px; text-align: center;
  font-size: 13px; color: var(--text-muted); flex-shrink: 0;
}
.queue-item.current .qi-num { color: var(--purple-400); }
.queue-item .qi-cover {
  width: 38px; height: 38px; border-radius: 6px;
  overflow: hidden; flex-shrink: 0;
}
.queue-item .qi-cover img { width: 100%; height: 100%; object-fit: cover; }
.queue-item .qi-info { flex: 1; min-width: 0; }
.queue-item .qi-name { font-size: 13px; font-weight: 500; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.queue-item .qi-artist { font-size: 12px; color: var(--text-muted); }

/* Lyrics */
.lyrics-placeholder {
  display: flex; flex-direction: column; align-items: center;
  justify-content: center; height: 100%; gap: 16px;
  color: var(--text-muted); text-align: center;
}
.lyrics-placeholder p { font-size: 14px; }

.lyrics-content { padding: 8px; }
.lyrics-track-info { text-align: center; margin-bottom: 24px; }
.lyrics-track-info .lyrics-title { font-size: 18px; font-weight: 700; margin-bottom: 4px; }
.lyrics-track-info .lyrics-artist { color: var(--text-muted); font-size: 14px; }
.lyrics-text {
  font-size: 15px; line-height: 2; color: var(--text-secondary);
  white-space: pre-line;
}
.lyrics-text .line-active { color: var(--text-primary); font-weight: 600; font-size: 16px; }
.lyrics-loading {
  display: flex; flex-direction: column; align-items: center; gap: 16px;
  padding: 40px 20px; color: var(--text-muted);
}

/* ══════════════════════════════════════════════
   PLAYER BAR
══════════════════════════════════════════════ */
.player-bar {
  grid-column: 1 / 3; grid-row: 2 / 3;
  height: var(--player-h);
  background: rgba(15,15,28,0.95);
  backdrop-filter: blur(20px);
  border-top: 1px solid var(--border-subtle);
  display: grid;
  grid-template-columns: 1fr 2fr 1fr;
  align-items: center;
  padding: 0 20px;
  gap: 16px;
  z-index: 100;
}

/* Track Info */
.player-track {
  display: flex; align-items: center; gap: 12px;
  min-width: 0;
}
.player-cover {
  width: 52px; height: 52px; flex-shrink: 0;
  border-radius: var(--radius-sm);
  overflow: hidden; background: var(--bg-elevated);
  display: flex; align-items: center; justify-content: center;
}
.player-cover img { width: 100%; height: 100%; object-fit: cover; }
.cover-placeholder { color: var(--text-muted); }
.player-track-info { flex: 1; min-width: 0; }
.player-track-name {
  font-size: 14px; font-weight: 600;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.player-track-artist {
  font-size: 12px; color: var(--text-muted);
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
  cursor: pointer;
}
.player-track-artist:hover { color: var(--text-primary); text-decoration: underline; }
.player-like-btn {
  color: var(--text-muted); flex-shrink: 0;
  transition: var(--trans-fast); padding: 4px;
}
.player-like-btn:hover { color: var(--pink-400); transform: scale(1.1); }
.player-like-btn.liked { color: var(--pink-500); }
.player-like-btn.liked svg { fill: var(--pink-500); }

/* Controls */
.player-controls {
  display: flex; flex-direction: column; align-items: center; gap: 8px;
}
.player-btns {
  display: flex; align-items: center; gap: 4px;
}
.player-btn {
  width: 36px; height: 36px;
  display: flex; align-items: center; justify-content: center;
  border-radius: 50%;
  color: var(--text-secondary);
  transition: var(--trans-fast);
}
.player-btn:hover { color: var(--text-primary); transform: scale(1.05); }
.player-btn.active { color: var(--purple-400); }
.player-btn-play {
  width: 44px; height: 44px;
  background: var(--text-primary);
  color: var(--bg-base) !important;
  flex-shrink: 0;
}
.player-btn-play:hover { transform: scale(1.06) !important; background: white; }
.player-btn-prev, .player-btn-next { color: var(--text-secondary); }

.player-progress {
  display: flex; align-items: center; gap: 10px;
  width: 100%;
}
.player-time {
  font-size: 11px; color: var(--text-muted);
  font-feature-settings: 'tnum'; width: 32px; flex-shrink: 0;
}
#current-time { text-align: right; }

.progress-bar {
  flex: 1; height: 4px; background: var(--bg-hover);
  border-radius: 2px; cursor: pointer; position: relative;
  transition: height var(--trans-fast);
}
.progress-bar:hover { height: 6px; }
.progress-fill {
  height: 100%; background: var(--text-primary);
  border-radius: 2px; transition: width 0.1s linear;
}
.progress-bar:hover .progress-fill { background: var(--gradient-primary); }
.progress-thumb {
  position: absolute; top: 50%; transform: translate(-50%, -50%);
  width: 12px; height: 12px; border-radius: 50%;
  background: var(--text-primary); opacity: 0;
  transition: opacity var(--trans-fast);
}
.progress-bar:hover .progress-thumb { opacity: 1; }

/* Extra controls */
.player-extra {
  display: flex; align-items: center; justify-content: flex-end; gap: 4px;
}
.volume-control { display: flex; align-items: center; gap: 6px; }
.volume-btn { flex-shrink: 0; }
.volume-slider-wrap { width: 90px; }
.volume-slider {
  -webkit-appearance: none; appearance: none;
  width: 100%; height: 4px;
  background: var(--bg-hover); border-radius: 2px; outline: none;
  cursor: pointer; transition: height var(--trans-fast);
}
.volume-slider:hover { height: 6px; }
.volume-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 12px; height: 12px; border-radius: 50%;
  background: var(--text-primary); cursor: pointer;
  transition: transform var(--trans-fast);
}
.volume-slider:hover::-webkit-slider-thumb { transform: scale(1.3); }

/* ══════════════════════════════════════════════
   VIEWS – SHARED
══════════════════════════════════════════════ */
.view-header {
  display: flex; align-items: flex-end; gap: 32px;
  margin-bottom: 40px; padding-bottom: 24px;
}
.view-cover {
  width: 220px; height: 220px; flex-shrink: 0;
  border-radius: var(--radius-md); overflow: hidden;
  box-shadow: var(--shadow-lg);
}
.view-cover img { width: 100%; height: 100%; object-fit: cover; }
.view-cover-gradient {
  width: 100%; height: 100%;
  display: flex; align-items: center; justify-content: center;
  background: var(--gradient-primary);
}
.view-meta { flex: 1; min-width: 0; }
.view-type {
  font-size: 11px; font-weight: 700; text-transform: uppercase;
  letter-spacing: 1.5px; color: var(--text-muted); margin-bottom: 8px;
}
.view-title {
  font-size: 48px; font-weight: 900;
  line-height: 1.1; margin-bottom: 16px;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.view-description { color: var(--text-muted); font-size: 14px; margin-bottom: 12px; }
.view-stats {
  font-size: 13px; color: var(--text-secondary);
}
.view-stats strong { color: var(--text-primary); }

.view-actions {
  display: flex; align-items: center; gap: 16px;
  margin-bottom: 32px;
}
.btn-play-large {
  width: 56px; height: 56px; border-radius: 50%;
  background: var(--gradient-primary);
  display: flex; align-items: center; justify-content: center;
  box-shadow: var(--shadow-glow);
  transition: var(--trans-fast);
}
.btn-play-large:hover { transform: scale(1.05); box-shadow: 0 0 40px rgba(139,92,246,0.5); }
.btn-outline {
  padding: 8px 20px; border-radius: var(--radius-full);
  border: 1px solid var(--border-medium);
  font-size: 14px; font-weight: 600;
  color: var(--text-secondary);
  transition: var(--trans-fast);
}
.btn-outline:hover { border-color: var(--text-primary); color: var(--text-primary); }
.btn-primary {
  padding: 10px 24px; border-radius: var(--radius-full);
  background: var(--gradient-primary);
  font-size: 14px; font-weight: 700; color: white;
  transition: var(--trans-fast);
}
.btn-primary:hover { opacity: 0.9; transform: scale(1.02); }
.btn-secondary {
  padding: 10px 24px; border-radius: var(--radius-full);
  background: rgba(255,255,255,0.08);
  font-size: 14px; font-weight: 600;
  border: 1px solid var(--border-subtle);
  transition: var(--trans-fast);
}
.btn-secondary:hover { background: rgba(255,255,255,0.12); }

/* ─── Track List ─── */
.track-list-header {
  display: grid; grid-template-columns: 40px 1fr 1fr auto auto;
  align-items: center; gap: 16px;
  padding: 0 16px 8px;
  border-bottom: 1px solid var(--border-subtle);
  margin-bottom: 8px;
  font-size: 12px; font-weight: 700;
  color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.8px;
}
.track-list { display: flex; flex-direction: column; }
.track-item {
  display: grid; grid-template-columns: 40px 1fr 1fr auto auto;
  align-items: center; gap: 16px;
  padding: 8px 16px; border-radius: var(--radius-sm);
  transition: var(--trans-fast); cursor: pointer;
  group: true; position: relative;
}
.track-item:hover { background: var(--bg-hover); }
.track-item.playing { background: rgba(139,92,246,0.1); }
.track-num {
  width: 24px; text-align: center;
  font-size: 14px; color: var(--text-muted);
  position: relative;
}
.track-item.playing .track-num { color: var(--purple-400); }
.track-play-overlay {
  position: absolute; top: 0; left: 0; right: 0;
  display: flex; align-items: center; justify-content: center;
  opacity: 0; transition: opacity var(--trans-fast);
  color: var(--text-primary);
}
.track-item:hover .track-play-overlay { opacity: 1; }
.track-item:hover .track-num-text { opacity: 0; }

.track-info-cell { display: flex; align-items: center; gap: 12px; min-width: 0; }
.track-cover {
  width: 40px; height: 40px; flex-shrink: 0;
  border-radius: 6px; overflow: hidden;
  background: var(--bg-elevated);
}
.track-cover img { width: 100%; height: 100%; object-fit: cover; }
.track-title {
  font-size: 14px; font-weight: 500;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.track-item.playing .track-title { color: var(--purple-400); }
.track-artist {
  font-size: 13px; color: var(--text-muted);
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.track-artist:hover { color: var(--text-primary); text-decoration: underline; }
.track-album {
  font-size: 13px; color: var(--text-muted);
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.track-album:hover { color: var(--text-primary); text-decoration: underline; }
.track-duration { font-size: 13px; color: var(--text-muted); white-space: nowrap; }
.track-actions {
  display: flex; align-items: center; gap: 4px;
  opacity: 0; transition: opacity var(--trans-fast);
}
.track-item:hover .track-actions { opacity: 1; }
.track-item.playing .track-actions { opacity: 1; }
.track-like-btn { color: var(--text-muted); transition: var(--trans-fast); padding: 4px; border-radius: 4px; }
.track-like-btn:hover { color: var(--pink-400); }
.track-like-btn.liked { color: var(--pink-500); }
.track-like-btn.liked svg { fill: var(--pink-500); }
.track-more-btn { color: var(--text-muted); transition: var(--trans-fast); padding: 4px; border-radius: 4px; }
.track-more-btn:hover { color: var(--text-primary); }

/* Compact track list (no album column) */
.track-list-compact .track-item {
  grid-template-columns: 40px 1fr auto auto;
}
.track-list-compact .track-list-header {
  grid-template-columns: 40px 1fr auto auto;
}
.track-list-compact .track-album { display: none; }

/* ─── Cards ─── */
.cards-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(170px, 1fr));
  gap: 20px;
}
.card {
  background: var(--bg-card);
  border-radius: var(--radius-md);
  padding: 16px;
  cursor: pointer;
  transition: var(--trans-fast);
  position: relative; overflow: hidden;
  border: 1px solid transparent;
}
.card:hover {
  background: var(--bg-hover);
  transform: translateY(-2px);
  border-color: var(--border-subtle);
}
.card-cover {
  width: 100%; aspect-ratio: 1;
  border-radius: var(--radius-sm); overflow: hidden;
  margin-bottom: 14px; position: relative;
  background: var(--bg-elevated);
  box-shadow: var(--shadow-sm);
}
.card-cover img { width: 100%; height: 100%; object-fit: cover; }
.card-cover-gradient {
  width: 100%; height: 100%;
  display: flex; align-items: center; justify-content: center;
  background: var(--gradient-primary);
}
.card-cover-gradient svg { opacity: 0.7; }
.card-play-btn {
  position: absolute; bottom: 8px; right: 8px;
  width: 44px; height: 44px; border-radius: 50%;
  background: var(--gradient-primary);
  display: flex; align-items: center; justify-content: center;
  box-shadow: var(--shadow-md);
  opacity: 0; transform: translateY(8px);
  transition: var(--trans-fast);
}
.card:hover .card-play-btn { opacity: 1; transform: translateY(0); }
.card-title {
  font-size: 14px; font-weight: 700;
  margin-bottom: 4px;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.card-subtitle {
  font-size: 13px; color: var(--text-muted); line-height: 1.5;
  display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Artist card (circular) */
.card-artist .card-cover { border-radius: 50%; }
.card-artist .card-cover img { border-radius: 50%; }
.card-artist .card-title, .card-artist .card-subtitle { text-align: center; }

/* ─── Section Headers ─── */
.section-header {
  display: flex; align-items: center; justify-content: space-between;
  margin-bottom: 20px;
}
.section-title {
  font-size: 22px; font-weight: 800; cursor: pointer;
  display: flex; align-items: center; gap: 10px;
}
.section-title svg { flex-shrink: 0; }
.section-title:hover { text-decoration: underline; }
.section-see-all {
  font-size: 13px; font-weight: 600; color: var(--text-muted);
  text-transform: uppercase; letter-spacing: 0.5px;
  cursor: pointer; transition: color var(--trans-fast);
}
.section-see-all:hover { color: var(--text-primary); text-decoration: underline; }

.section-block { margin-bottom: 48px; }

/* ══════════════════════════════════════════════
   HOME VIEW
══════════════════════════════════════════════ */
.home-greeting {
  margin-bottom: 36px;
}
.home-greeting h1 {
  font-size: 36px; font-weight: 900;
  background: var(--gradient-primary);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
  margin-bottom: 4px;
}
.home-greeting p { color: var(--text-muted); font-size: 15px; }

/* Hero Banner */
.hero-banner {
  border-radius: var(--radius-xl);
  padding: 40px;
  margin-bottom: 40px;
  background: linear-gradient(135deg, #2d1b69, #1a0f3d, #0f0829);
  position: relative; overflow: hidden;
  border: 1px solid rgba(139,92,246,0.2);
  min-height: 180px;
  display: flex; align-items: center;
  cursor: pointer;
}
.hero-banner::before {
  content: ''; position: absolute; inset: 0;
  background: radial-gradient(ellipse at right, rgba(139,92,246,0.3), transparent);
}
.hero-content { position: relative; z-index: 1; max-width: 50%; }
.hero-tag {
  display: inline-block;
  background: var(--gradient-primary); color: white;
  font-size: 11px; font-weight: 800; text-transform: uppercase; letter-spacing: 1.5px;
  padding: 4px 12px; border-radius: var(--radius-full);
  margin-bottom: 12px;
}
.hero-title { font-size: 32px; font-weight: 900; line-height: 1.2; margin-bottom: 8px; }
.hero-sub { font-size: 15px; color: var(--text-secondary); margin-bottom: 20px; }
.hero-img {
  position: absolute; right: -20px; top: -20px; bottom: -20px;
  width: 50%; object-fit: cover; opacity: 0.6;
  border-radius: var(--radius-xl);
}

/* Quick access */
.quick-access {
  display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 10px; margin-bottom: 40px;
}
.quick-item {
  display: flex; align-items: center; gap: 12px;
  background: var(--bg-elevated);
  border-radius: var(--radius-sm);
  overflow: hidden; cursor: pointer;
  transition: var(--trans-fast); height: 56px;
  border: 1px solid transparent;
}
.quick-item:hover { background: var(--bg-hover); border-color: var(--border-subtle); }
.quick-item-cover {
  width: 56px; height: 56px; flex-shrink: 0;
  overflow: hidden;
}
.quick-item-cover img { width: 100%; height: 100%; object-fit: cover; }
.quick-item-cover-gradient {
  width: 100%; height: 100%;
  display: flex; align-items: center; justify-content: center;
  background: var(--gradient-primary);
}
.quick-item-name {
  font-size: 14px; font-weight: 700;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
  padding-right: 12px;
}

/* Featured track big card */
.featured-track {
  border-radius: var(--radius-lg);
  background: linear-gradient(135deg, rgba(139,92,246,0.2), rgba(236,72,153,0.1));
  border: 1px solid rgba(139,92,246,0.2);
  padding: 24px;
  display: flex; gap: 20px; align-items: center;
  margin-bottom: 32px; cursor: pointer;
  transition: var(--trans-fast);
}
.featured-track:hover { background: linear-gradient(135deg, rgba(139,92,246,0.3), rgba(236,72,153,0.15)); }
.featured-track .ft-cover {
  width: 100px; height: 100px; border-radius: var(--radius-sm);
  overflow: hidden; flex-shrink: 0; box-shadow: var(--shadow-md);
}
.featured-track .ft-cover img { width: 100%; height: 100%; object-fit: cover; }
.featured-track .ft-info { flex: 1; }
.featured-track .ft-badge {
  font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px;
  color: var(--purple-400); margin-bottom: 6px;
}
.featured-track .ft-title { font-size: 22px; font-weight: 800; margin-bottom: 4px; }
.featured-track .ft-artist { color: var(--text-muted); font-size: 14px; margin-bottom: 12px; }

/* ══════════════════════════════════════════════
   SEARCH VIEW
══════════════════════════════════════════════ */
.search-empty {
  display: flex; flex-direction: column; align-items: center;
  padding: 80px 20px; gap: 16px; color: var(--text-muted);
}
.search-empty svg { opacity: 0.4; }
.search-empty h3 { font-size: 22px; font-weight: 700; color: var(--text-secondary); }
.search-empty p { font-size: 15px; }

.genres-grid {
  display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 12px;
}
.genre-card {
  aspect-ratio: 1.4; border-radius: var(--radius-md);
  display: flex; align-items: flex-end; padding: 14px;
  cursor: pointer; overflow: hidden; position: relative;
  transition: var(--trans-fast);
}
.genre-card:hover { transform: scale(1.02); }
.genre-card-name {
  font-size: 16px; font-weight: 800; position: relative; z-index: 1;
}
.genre-emoji { position: absolute; top: 12px; right: 12px; font-size: 32px; opacity: 0.7; }
.genre-icon {
  position: absolute; top: 12px; right: 12px;
  width: 36px; height: 36px; opacity: 0.75;
  display: flex; align-items: center; justify-content: center;
}
.genre-icon svg { width: 100%; height: 100%; color: white; }

/* Search results */
.search-results-section { margin-bottom: 40px; }
.top-result {
  background: var(--bg-card);
  border-radius: var(--radius-md); padding: 20px;
  cursor: pointer; transition: var(--trans-fast);
  border: 1px solid transparent;
}
.top-result:hover { background: var(--bg-hover); border-color: var(--border-subtle); }
.top-result-cover {
  width: 100px; height: 100px; border-radius: var(--radius-sm);
  overflow: hidden; margin-bottom: 16px;
  box-shadow: var(--shadow-md);
}
.top-result-cover img { width: 100%; height: 100%; object-fit: cover; }
.top-result-name { font-size: 24px; font-weight: 900; margin-bottom: 4px; }
.top-result-type { color: var(--text-muted); font-size: 13px; }

.search-grid {
  display: grid; grid-template-columns: 1fr 2fr; gap: 32px;
  align-items: start;
}

/* ══════════════════════════════════════════════
   LIBRARY VIEW
══════════════════════════════════════════════ */
.library-tabs {
  display: flex; gap: 8px; margin-bottom: 32px; flex-wrap: wrap;
}
.library-tab {
  padding: 8px 18px; border-radius: var(--radius-full);
  font-size: 14px; font-weight: 600;
  background: rgba(255,255,255,0.06);
  border: 1px solid var(--border-subtle);
  cursor: pointer; transition: var(--trans-fast);
  color: var(--text-secondary);
}
.library-tab:hover { background: rgba(255,255,255,0.1); color: var(--text-primary); }
.library-tab.active {
  background: rgba(139,92,246,0.2);
  border-color: var(--purple-500);
  color: var(--purple-400);
}

.library-filters {
  display: flex; gap: 16px; align-items: center; margin-bottom: 24px;
}
.library-search {
  display: flex; align-items: center; gap: 10px;
  background: rgba(255,255,255,0.06);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-full);
  padding: 8px 14px; flex: 1; max-width: 300px;
}
.library-search input { background: none; border: none; outline: none; font-size: 14px; color: var(--text-primary); flex: 1; }
.library-search input::placeholder { color: var(--text-muted); }
.sort-select {
  background: rgba(255,255,255,0.06);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-full);
  padding: 8px 14px;
  font-size: 13px; color: var(--text-secondary);
  outline: none; cursor: pointer;
}
.sort-select:hover { border-color: var(--border-medium); }

/* ══════════════════════════════════════════════
   PROFILE / SETTINGS
══════════════════════════════════════════════ */
.profile-hero {
  display: flex; align-items: flex-end; gap: 32px;
  margin-bottom: 48px;
  padding: 48px 32px 32px;
  background: var(--gradient-bg); border-radius: var(--radius-xl);
  border: 1px solid var(--border-subtle);
  position: relative; overflow: hidden;
}
.profile-avatar {
  width: 140px; height: 140px; border-radius: 50%;
  overflow: hidden; flex-shrink: 0;
  box-shadow: var(--shadow-lg);
  background: var(--gradient-primary);
  display: flex; align-items: center; justify-content: center;
  font-size: 48px; font-weight: 700;
}
.profile-avatar img { width: 100%; height: 100%; object-fit: cover; }
.profile-info { flex: 1; }
.profile-type { font-size: 12px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; color: var(--text-muted); margin-bottom: 8px; }
.profile-name { font-size: 48px; font-weight: 900; margin-bottom: 16px; }
.profile-stats {
  display: flex; gap: 32px;
  font-size: 14px; color: var(--text-secondary);
}
.profile-stats strong { color: var(--text-primary); font-size: 16px; display: block; }

.settings-card {
  background: var(--bg-card);
  border-radius: var(--radius-lg);
  border: 1px solid var(--border-subtle);
  overflow: hidden; margin-bottom: 24px;
}
.settings-card-header {
  padding: 20px 24px;
  border-bottom: 1px solid var(--border-subtle);
  font-size: 16px; font-weight: 700;
}
.settings-row {
  display: flex; align-items: center; justify-content: space-between;
  padding: 18px 24px;
  border-bottom: 1px solid var(--border-subtle);
  gap: 16px;
}
.settings-row:last-child { border-bottom: none; }
.settings-label { font-size: 15px; font-weight: 500; }
.settings-desc { font-size: 13px; color: var(--text-muted); margin-top: 2px; }
.toggle-switch {
  position: relative; width: 44px; height: 24px; flex-shrink: 0;
}
.toggle-switch input { opacity: 0; width: 0; height: 0; }
.toggle-slider {
  position: absolute; inset: 0;
  background: var(--bg-hover); border-radius: 12px; cursor: pointer;
  transition: var(--trans-fast);
}
.toggle-slider::after {
  content: ''; position: absolute;
  width: 18px; height: 18px; border-radius: 50%;
  background: white; top: 3px; left: 3px;
  transition: transform var(--trans-fast);
}
.toggle-switch input:checked + .toggle-slider { background: var(--gradient-primary); }
.toggle-switch input:checked + .toggle-slider::after { transform: translateX(20px); }

/* ══════════════════════════════════════════════
   MODALS
══════════════════════════════════════════════ */
.modal-overlay {
  position: fixed; inset: 0; z-index: 500;
  background: rgba(0,0,0,0.7);
  backdrop-filter: blur(8px);
  display: flex; align-items: center; justify-content: center;
  animation: fadeIn 0.2s var(--ease-smooth);
}
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

.modal {
  background: var(--bg-elevated);
  border: 1px solid var(--border-medium);
  border-radius: var(--radius-xl);
  width: 90%; max-width: 480px;
  box-shadow: var(--shadow-lg);
  animation: scaleIn 0.25s var(--ease-bounce);
}
.modal-sm { max-width: 360px; }
@keyframes scaleIn {
  from { opacity: 0; transform: scale(0.95); }
  to { opacity: 1; transform: scale(1); }
}
.modal-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 20px 24px; border-bottom: 1px solid var(--border-subtle);
}
.modal-header h3 { font-size: 18px; font-weight: 700; }
.modal-body { padding: 24px; }
.modal-footer {
  display: flex; align-items: center; justify-content: flex-end; gap: 12px;
  padding: 16px 24px; border-top: 1px solid var(--border-subtle);
}

.playlist-cover-edit {
  display: flex; align-items: center; gap: 16px; margin-bottom: 24px;
}
.cover-gradient {
  width: 80px; height: 80px; border-radius: var(--radius-sm);
  background: var(--gradient-primary);
  display: flex; align-items: center; justify-content: center;
  flex-shrink: 0;
}
.cover-edit-btn {
  padding: 8px 16px; border-radius: var(--radius-sm);
  font-size: 13px; font-weight: 600;
  background: rgba(255,255,255,0.06);
  border: 1px solid var(--border-subtle);
  display: flex; align-items: center; gap: 8px;
  transition: var(--trans-fast);
}
.cover-edit-btn:hover { background: rgba(255,255,255,0.1); }

.radio-group { display: flex; gap: 24px; }
.radio-item {
  display: flex; align-items: center; gap: 8px;
  font-size: 14px; cursor: pointer;
}
.radio-item input { accent-color: var(--purple-500); }

.playlist-new-btn {
  width: 100%; display: flex; align-items: center; gap: 10px;
  padding: 12px 16px; border-radius: var(--radius-sm);
  font-size: 14px; font-weight: 600;
  border: 1px dashed var(--border-medium);
  margin-bottom: 12px; transition: var(--trans-fast);
  color: var(--text-secondary);
}
.playlist-new-btn:hover { border-color: var(--purple-500); color: var(--purple-400); background: rgba(139,92,246,0.08); }

.playlist-option {
  display: flex; align-items: center; gap: 12px;
  padding: 10px 12px; border-radius: var(--radius-sm);
  cursor: pointer; transition: var(--trans-fast);
}
.playlist-option:hover { background: var(--bg-hover); }
.playlist-option-cover {
  width: 40px; height: 40px; border-radius: 6px;
  overflow: hidden; flex-shrink: 0;
  background: var(--gradient-primary);
  display: flex; align-items: center; justify-content: center;
}
.playlist-option-cover img { width: 100%; height: 100%; object-fit: cover; }
.playlist-option-name { font-size: 14px; font-weight: 500; }
.playlist-option-count { font-size: 12px; color: var(--text-muted); }

/* ─── Context Menu ─── */
.context-menu {
  position: fixed; z-index: 600;
  background: var(--bg-elevated);
  border: 1px solid var(--border-medium);
  border-radius: var(--radius-md);
  padding: 6px; min-width: 200px;
  box-shadow: var(--shadow-lg);
  animation: scaleIn 0.15s var(--ease-bounce);
}
.context-menu ul { display: flex; flex-direction: column; gap: 1px; }
.context-menu li a {
  display: flex; align-items: center; gap: 10px;
  padding: 10px 12px; border-radius: var(--radius-sm);
  font-size: 14px; color: var(--text-secondary);
  cursor: pointer; transition: var(--trans-fast);
  white-space: nowrap;
}
.context-menu li a:hover { background: var(--bg-hover); color: var(--text-primary); }
.context-menu .context-danger a { color: #f87171 !important; }
.context-menu .context-danger a:hover { background: rgba(248,113,113,0.1) !important; }
.context-menu-divider { height: 1px; background: var(--border-subtle); margin: 4px 0; }

/* ─── Toast ─── */
.toast-container {
  position: fixed; bottom: calc(var(--player-h) + 20px); right: 20px;
  z-index: 700; display: flex; flex-direction: column; gap: 10px;
  pointer-events: none;
}
.toast {
  background: var(--bg-elevated);
  border: 1px solid var(--border-medium);
  border-radius: var(--radius-md);
  padding: 14px 18px;
  display: flex; align-items: center; gap: 10px;
  font-size: 14px; font-weight: 500;
  box-shadow: var(--shadow-lg);
  pointer-events: all;
  animation: toastIn 0.3s var(--ease-bounce);
  min-width: 260px; max-width: 380px;
}
.toast.success .toast-icon { color: var(--green-500); }
.toast.error .toast-icon { color: #f87171; }
.toast.info .toast-icon { color: var(--purple-400); }
@keyframes toastIn {
  from { opacity: 0; transform: translateX(40px) scale(0.9); }
  to { opacity: 1; transform: translateX(0) scale(1); }
}
@keyframes toastOut {
  to { opacity: 0; transform: translateX(40px) scale(0.9); }
}
.toast.hiding { animation: toastOut 0.3s var(--ease-smooth) forwards; }

/* ─── Loading Spinner ─── */
.spinner {
  display: inline-block; width: 20px; height: 20px;
  border: 2px solid rgba(139,92,246,0.2);
  border-top-color: var(--purple-500);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

.loading-state {
  display: flex; flex-direction: column; align-items: center;
  padding: 60px; gap: 16px; color: var(--text-muted);
}
.loading-state .spinner { width: 36px; height: 36px; }

.empty-state {
  display: flex; flex-direction: column; align-items: center;
  padding: 80px 20px; gap: 16px; color: var(--text-muted); text-align: center;
}
.empty-state svg { opacity: 0.3; }
.empty-state h3 { font-size: 22px; font-weight: 700; color: var(--text-secondary); }
.empty-state p { font-size: 15px; max-width: 300px; }

/* ─── Now Playing Animation ─── */
.now-playing-bars {
  display: flex; align-items: flex-end; gap: 2px; height: 16px;
}
.now-playing-bars span {
  display: block; width: 3px; background: var(--purple-400);
  border-radius: 1.5px; animation: bars 1.2s ease-in-out infinite;
}
.now-playing-bars span:nth-child(1) { height: 40%; animation-delay: 0s; }
.now-playing-bars span:nth-child(2) { height: 100%; animation-delay: 0.2s; }
.now-playing-bars span:nth-child(3) { height: 60%; animation-delay: 0.4s; }
@keyframes bars {
  0%, 100% { transform: scaleY(0.4); }
  50% { transform: scaleY(1); }
}

/* Mobile search button — hidden on desktop */
.mobile-search-btn { display: none !important; }

/* Topbar hamburger — hidden on desktop */
.topbar-menu-btn { display: none !important; }

/* Mobile sidebar overlay backdrop */
.sidebar-overlay {
  display: none;
  position: fixed; inset: 0; z-index: 190;
  background: rgba(0,0,0,0.6);
  backdrop-filter: blur(4px);
  opacity: 0; pointer-events: none;
  transition: opacity var(--trans-med);
}
.sidebar-overlay.active {
  opacity: 1; pointer-events: auto;
}

/* Mobile sidebar toggle (floating — kept as secondary access) */
.sidebar-toggle {
  display: none;
  position: fixed; bottom: calc(var(--player-h) + 16px); left: 16px;
  width: 44px; height: 44px;
  background: var(--bg-elevated); border: 1px solid var(--border-medium);
  border-radius: 50%; align-items: center; justify-content: center;
  z-index: 150; box-shadow: var(--shadow-md);
}

/* Player bar — needs relative context for mobile progress strip */
.player-bar { position: relative; }

/* ══════════════════════════════════════════════
   RESPONSIVE
══════════════════════════════════════════════ */

/* ─── 1100px : masquer la colonne album ─── */
@media (max-width: 1100px) {
  .view-title { font-size: 36px; }
  .view-cover { width: 180px; height: 180px; }
  .track-album { display: none; }
  .track-list-header { grid-template-columns: 40px 1fr auto auto; }
  .track-item        { grid-template-columns: 40px 1fr auto auto; }
  .search-grid       { grid-template-columns: 1fr; gap: 24px; }
}

/* ─── 900px : masquer la sidebar, la rendre un drawer ─── */
@media (max-width: 900px) {
  :root { --sidebar-w: 0px; }
  .sidebar {
    position: fixed; left: -260px; top: 0;
    width: 260px; height: calc(100vh - var(--player-h));
    z-index: 200; transition: left var(--trans-med);
  }
  .sidebar.open { left: 0; }
  .sidebar-overlay { display: block; }
  .topbar-menu-btn  { display: flex !important; }
  .sidebar-toggle   { display: none; } /* remplacé par hamburger topbar */
  .app              { grid-template-columns: 1fr; }
  .content-wrapper  { grid-column: 1; }
  .page-content     { padding: 20px; }
  .topbar           { padding: 0 12px; gap: 8px; }
  .topbar-search-wrap { max-width: 340px; }
  .view-title  { font-size: 28px; }
  .view-header { flex-direction: column; align-items: flex-start; gap: 20px; }
  .view-cover  { width: 160px; height: 160px; }
  .profile-hero    { flex-direction: column; align-items: center; padding: 32px 24px; text-align: center; }
  .profile-stats   { justify-content: center; gap: 20px; }
  .profile-name    { font-size: 36px; }
  /* Side panels full-width on tablet */
  .side-panel { width: min(320px, 100vw); }
}

/* ─── 768px : tablette ─── */
@media (max-width: 768px) {
  .hero-banner  { padding: 28px; min-height: 150px; }
  .hero-title   { font-size: 24px; }
  .hero-content { max-width: 70%; }
  .home-greeting h1 { font-size: 28px; }
  .cards-grid   { grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 14px; }
  .view-title   { font-size: 24px; }
  .view-cover   { width: 140px; height: 140px; }
  /* Side panels: slide from bottom on mobile */
  .side-panel {
    width: 100%; right: auto;
    bottom: calc(var(--player-h)); left: 0;
    height: 70vh;
    transform: translateY(100%);
    transition: transform var(--trans-med);
    border-left: none; border-top: 1px solid var(--border-subtle);
    border-radius: var(--radius-xl) var(--radius-xl) 0 0;
  }
  .side-panel.open { transform: translateY(0); right: auto; }
}

/* ─── 640px : mobile ─── */
@media (max-width: 640px) {
  /* — Layout — */
  .page-content { padding: 16px; }
  .topbar       { padding: 0 10px; gap: 6px; }
  .nav-back, .nav-fwd { display: none; } /* replaced by gestures / topbar back logic */

  /* — Mobile search bar — */
  .topbar-search-wrap {
    position: fixed; top: var(--topbar-h); left: 0; right: 0;
    padding: 8px 14px; background: var(--bg-surface);
    border-bottom: 1px solid var(--border-subtle);
    z-index: 99; transform: translateY(-110%);
    transition: transform 0.25s var(--ease-smooth);
    max-width: 100%;
  }
  .topbar-search-wrap.mobile-open { transform: translateY(0); }
  .topbar-search { border-radius: var(--radius-full); }
  .mobile-search-btn { display: flex !important; }

  /* — Auth — */
  .auth-card     { padding: 28px 20px; }
  .auth-title    { font-size: 24px; }
  .auth-features { gap: 10px; flex-direction: column; align-items: center; }
  .feature-item  { font-size: 12px; padding: 7px 14px; }

  /* — Hero — */
  .hero-banner    { padding: 20px; min-height: 130px; }
  .hero-title     { font-size: 20px; }
  .hero-img       { display: none; }
  .hero-content   { max-width: 100%; }
  .home-greeting h1 { font-size: 24px; }
  .home-greeting    { margin-bottom: 24px; }

  /* — Cards — */
  .cards-grid { grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); gap: 12px; }

  /* — Section headers — */
  .section-title    { font-size: 18px; }
  .section-block    { margin-bottom: 36px; }

  /* — Genres — */
  .genres-grid    { grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); gap: 8px; }
  .genre-card     { padding: 12px; }
  .genre-card-name { font-size: 13px; }

  /* — Track list — */
  .track-album { display: none; }
  .track-item        { grid-template-columns: 36px 1fr auto auto; padding: 6px 10px; }
  .track-list-header { grid-template-columns: 36px 1fr auto auto; padding: 0 10px 8px; }
  .track-cover { width: 34px; height: 34px; }

  /* — Quick access — */
  .quick-access { grid-template-columns: repeat(2, 1fr); gap: 8px; }

  /* — View header — */
  .view-type  { font-size: 10px; }
  .view-title { font-size: 22px; }
  .view-cover { width: 120px; height: 120px; }
  .view-actions { gap: 10px; flex-wrap: wrap; }
  .btn-play-large { width: 48px; height: 48px; }

  /* — Profile — */
  .profile-avatar { width: 100px; height: 100px; font-size: 36px; }
  .profile-name   { font-size: 28px; }
  .profile-hero   { padding: 24px 16px; }

  /* — Settings — */
  .settings-row  { padding: 14px 18px; }
  .settings-card-header { padding: 16px 18px; }

  /* — Sidebar — */
  .user-info { display: none; }
  .user-menu { gap: 6px; }

  /* — Player bar (mobile) —
     Show a thin progress strip at the very top of the bar.
     Controls: cover + name | prev · play · next                        */
  .player-bar {
    grid-template-columns: 1fr auto;
    padding: 4px 12px 8px;
    gap: 6px;
    min-height: 68px;
  }
  .player-extra  { display: none; }
  .player-track  { min-width: 0; }
  .player-track-name   { font-size: 13px; }
  .player-track-artist { font-size: 11px; }
  .player-controls {
    justify-content: center; gap: 2px;
  }
  /* Hide shuffle and repeat on mobile — too cluttered */
  #shuffle-btn, #repeat-btn { display: none; }
  .player-btn-play { width: 40px; height: 40px; }

  /* Progress bar: thin strip at the very top of the player bar */
  .player-progress {
    display: flex;
    position: absolute; top: 0; left: 0; right: 0;
    height: 3px; padding: 0; gap: 0;
    align-items: stretch;
  }
  .player-time { display: none; }
  .progress-bar {
    flex: 1; height: 3px; border-radius: 0;
    transition: none;
  }
  .progress-bar:hover { height: 3px; } /* no grow on touch */
  .progress-thumb { display: none; }

  /* Side panels: full-screen sheet on mobile */
  .side-panel {
    bottom: var(--player-h); left: 0; right: 0;
    width: 100%; height: 65vh;
    transform: translateY(100%); border-radius: var(--radius-xl) var(--radius-xl) 0 0;
    border-left: none; border-top: 1px solid var(--border-subtle);
  }
  .side-panel.open { transform: translateY(0); right: 0; }
}

/* ─── 380px : très petits écrans ─── */
@media (max-width: 380px) {
  .auth-card   { padding: 20px 16px; }
  .auth-title  { font-size: 22px; }
  .cards-grid  { grid-template-columns: repeat(2, 1fr); gap: 10px; }
  .genres-grid { grid-template-columns: repeat(2, 1fr); gap: 6px; }
  .quick-access { grid-template-columns: 1fr; }
  .player-cover { width: 42px; height: 42px; }
  .home-greeting h1 { font-size: 20px; }
}
